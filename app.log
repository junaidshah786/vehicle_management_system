2025-09-18 19:55:20,788 - INFO - Signup attempt for junaid@gmail.com
2025-09-23 20:57:42,037 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 20:57:43,617 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 20:57:43,756 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 1
2025-09-23 20:57:44,164 - INFO - Retrieved 0 active device tokens
2025-09-23 20:57:44,164 - WARNING - No active device tokens found
2025-09-23 20:58:33,249 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 20:58:33,557 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 20:58:33,643 - INFO - Vehicle vkbZt5TCDo73pxqme1mT added to Firestore queue at rank 1
2025-09-23 20:58:33,939 - INFO - Retrieved 0 active device tokens
2025-09-23 20:58:33,939 - WARNING - No active device tokens found
2025-09-23 21:02:46,299 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:02:46,783 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:02:46,916 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 1
2025-09-23 21:02:47,305 - INFO - Retrieved 0 active device tokens
2025-09-23 21:02:47,305 - WARNING - No active device tokens found
2025-09-23 21:25:39,926 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:25:41,772 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH released from Firestore queue
2025-09-23 21:25:41,772 - ERROR - Error in verify_and_add_to_queue: Traceback (most recent call last):
  File "E:\workspace\poc\vehicle_management_system\app\routers\queue_management.py", line 222, in verify_and_queue_vehicle
    await update_queue_ranks_after_removal(current_rank, vehicle_type)
TypeError: update_queue_ranks_after_removal() missing 1 required positional argument: 'vehicle_shift'

2025-09-23 21:27:31,101 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:27:33,815 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:27:33,954 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 1
2025-09-23 21:27:34,462 - INFO - Retrieved 0 active device tokens
2025-09-23 21:27:34,462 - WARNING - No active device tokens found
2025-09-23 21:28:08,336 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:28:09,275 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:28:09,475 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 1
2025-09-23 21:28:10,293 - INFO - Retrieved 0 active device tokens
2025-09-23 21:28:10,293 - WARNING - No active device tokens found
2025-09-23 21:28:23,666 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 21:28:24,122 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:28:24,322 - INFO - Vehicle vkbZt5TCDo73pxqme1mT added to Firestore queue at rank 1
2025-09-23 21:28:24,947 - INFO - Retrieved 0 active device tokens
2025-09-23 21:28:24,947 - WARNING - No active device tokens found
2025-09-23 21:28:28,991 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 21:28:29,365 - INFO - Vehicle vkbZt5TCDo73pxqme1mT released from Firestore queue
2025-09-23 21:28:29,501 - ERROR - Error updating queue ranks: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQARoMCghfX25hbWVfXxAB
2025-09-23 21:28:30,453 - INFO - Retrieved 0 active device tokens
2025-09-23 21:28:30,453 - WARNING - No active device tokens found
2025-09-23 21:29:12,389 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 21:29:16,990 - ERROR - Error adding vehicle to queue: ('Cannot convert to a Firestore Value', <coroutine object get_next_queue_rank at 0x0000029416D0A650>, 'Invalid type', <class 'coroutine'>)
2025-09-23 21:29:17,055 - ERROR - Error in verify_and_add_to_queue: Traceback (most recent call last):
  File "E:\workspace\poc\vehicle_management_system\app\routers\queue_management.py", line 271, in verify_and_queue_vehicle
    next_rank = await add_vehicle_to_queue_firestore(vehicle_id, registration_number, vehicle_type, request.name, vehicle_shift)
  File "E:\workspace\poc\vehicle_management_system\app\services\vehicle_queue_utils.py", line 160, in add_vehicle_to_queue_firestore
    doc_ref.set(vehicle_queue_data)
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\document.py", line 166, in set
    batch, kwargs = self._prep_set(document_data, merge, retry, timeout)
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\base_document.py", line 226, in _prep_set
    batch.set(self, document_data, merge=merge)
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\base_batch.py", line 113, in set
    write_pbs = _helpers.pbs_for_set_no_merge(
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\_helpers.py", line 730, in pbs_for_set_no_merge
    set_pb = extractor.get_update_pb(document_path)
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\_helpers.py", line 593, in get_update_pb
    name=document_path, fields=encode_dict(self.set_fields)
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\_helpers.py", line 240, in encode_dict
    return {key: encode_value(value) for key, value in values_dict.items()}
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\_helpers.py", line 240, in <dictcomp>
    return {key: encode_value(value) for key, value in values_dict.items()}
  File "E:\workspace\poc\vehicle_management_system\myenv\lib\site-packages\google\cloud\firestore_v1\_helpers.py", line 224, in encode_value
    raise TypeError(
TypeError: ('Cannot convert to a Firestore Value', <coroutine object get_next_queue_rank at 0x0000029416D0A650>, 'Invalid type', <class 'coroutine'>)

2025-09-23 21:33:22,035 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 21:33:25,620 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:33:25,737 - INFO - Vehicle vkbZt5TCDo73pxqme1mT added to Firestore queue at rank 1
2025-09-23 21:33:26,301 - INFO - Retrieved 0 active device tokens
2025-09-23 21:33:26,301 - WARNING - No active device tokens found
2025-09-23 21:33:54,823 - INFO - Processing vehicle ID: vkbZt5TCDo73pxqme1mT, Registration: jk01y1111, Type: sumo
2025-09-23 21:33:55,197 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:33:55,335 - INFO - Vehicle vkbZt5TCDo73pxqme1mT added to Firestore queue at rank 1
2025-09-23 21:33:55,725 - INFO - Retrieved 0 active device tokens
2025-09-23 21:33:55,725 - WARNING - No active device tokens found
2025-09-23 21:34:03,626 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:34:04,140 - ERROR - Error getting next queue rank: 400 The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/vehiclemanagementsystem-e76c4/firestore/indexes?create_composite=CmJwcm9qZWN0cy92ZWhpY2xlbWFuYWdlbWVudHN5c3RlbS1lNzZjNC9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvdmVoaWNsZVF1ZXVlL2luZGV4ZXMvXxABGhAKDHZlaGljbGVTaGlmdBABGhAKDHZlaGljbGVfdHlwZRABGg4KCnF1ZXVlX3JhbmsQAhoMCghfX25hbWVfXxAC
2025-09-23 21:34:04,293 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 1
2025-09-23 21:34:04,774 - INFO - Retrieved 0 active device tokens
2025-09-23 21:34:04,774 - WARNING - No active device tokens found
2025-09-23 21:34:25,136 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:34:26,715 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH released from Firestore queue
2025-09-23 21:34:27,222 - INFO - Updated ranks after removing vehicle at rank 1
2025-09-23 21:34:27,861 - INFO - Retrieved 0 active device tokens
2025-09-23 21:34:27,861 - WARNING - No active device tokens found
2025-09-23 21:34:33,744 - INFO - Processing vehicle ID: v6SQGFGwxVFMIkutnXNH, Registration: jk01r1111, Type: sumo
2025-09-23 21:34:34,750 - INFO - Vehicle v6SQGFGwxVFMIkutnXNH added to Firestore queue at rank 2
2025-09-23 21:34:35,868 - INFO - Retrieved 0 active device tokens
2025-09-23 21:34:35,868 - WARNING - No active device tokens found
